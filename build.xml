<?xml version="1.0" encoding="UTF-8"?>
<project name="Koopa" default="help" basedir=".">
	<target name="help">
		<echo message="Use target regenerate to rebuild all parts. Or pick one of the other targets to rebuild selected parts (recommended only if you know what you're doing)." />
	</target>

	<target name="regenerate" depends="KGG,GenerateVerifications,KGToANTLR,SynchronizeCobolTokens,GenerateANTLRv3TreeFilters,GenerateUnitTests" />

	<target name="KGG">
		<java classname="koopa.grammars.generator.KGG" fork="true">
			<jvmarg value="-ea" />
			<arg value="Cobol" />
			<arg value="koopa.grammars.cobol" />
			<arg value="src/koopa/grammars/cobol/" />
			<classpath>
				<pathelement path="build" />
				<fileset dir="lib">
					<include name="*.jar" />
				</fileset>
				<pathelement path="${java.class.path}" />
			</classpath>
		</java>
	</target>

	<target name="GenerateVerifications">
		<java classname="koopa.verifiers.generator.GenerateVerifications" fork="true">
			<jvmarg value="-ea" />
			<arg value="Cobol" />
			<arg value="koopa.grammars.cobol" />
			<arg value="src/koopa/grammars/cobol/" />
			<classpath>
				<pathelement path="build" />
				<fileset dir="lib">
					<include name="*.jar" />
				</fileset>
				<pathelement path="${java.class.path}" />
			</classpath>
		</java>
	</target>

	<target name="KGToANTLR">
		<java classname="koopa.trees.antlr.generator.KGToANTLR" fork="true">
			<jvmarg value="-ea" />
			<arg value="Cobol" />
			<arg value="koopa.grammars.cobol.antlr" />
			<arg value="src/koopa/grammars/cobol/" />
			<arg value="src/koopa/grammars/cobol/antlr/" />
			<classpath>
				<pathelement path="build" />
				<fileset dir="lib">
					<include name="*.jar" />
				</fileset>
				<pathelement path="${java.class.path}" />
			</classpath>
		</java>
	</target>

	<target name="GenerateUnitTests">
		<java classname="koopa.grammars.test.generator.GenerateUnitTests" fork="true">
			<jvmarg value="-ea" />
			<arg value="test/koopa/grammars/cobol/test/" />
			<classpath>
				<pathelement path="build" />
				<fileset dir="lib">
					<include name="*.jar" />
				</fileset>
				<pathelement path="${java.class.path}" />
			</classpath>
		</java>
	</target>

	<target name="GenerateANTLRv3TreeFilters">
		<java classname="koopa.trees.antlr.filter.generator.GenerateANTLRv3TreeFilters" fork="true">
			<jvmarg value="-ea" />
			<arg value="src/" />
			<arg value="test/" />
			<arg value="app/" />
			<arg value="back-end/" />
			<arg value="sandbox/" />
			<arg value="processing/" />
			<classpath>
				<pathelement path="build" />
				<fileset dir="lib">
					<include name="*.jar" />
				</fileset>
				<pathelement path="${java.class.path}" />
			</classpath>
		</java>
	</target>

	<target name="SynchronizeGGTokens">
		<java classname="koopa.util.ANTSynchronize" fork="true">
			<jvmarg value="-ea" />
			<arg value="src/koopa/grammars/generator/KG.tokens" />
			<arg value="./" />
			<classpath>
				<pathelement path="build" />
				<fileset dir="lib">
					<include name="*.jar" />
				</fileset>
				<pathelement path="${java.class.path}" />
			</classpath>
		</java>
	</target>

	<target name="SynchronizeCobolTokens">
		<java classname="koopa.util.ANTSynchronize" fork="true">
			<jvmarg value="-ea" />
			<arg value="src/koopa/grammars/cobol/antlr/Cobol.tokens" />
			<arg value="./" />
			<classpath>
				<pathelement path="build" />
				<fileset dir="lib">
					<include name="*.jar" />
				</fileset>
				<pathelement path="${java.class.path}" />
			</classpath>
		</java>
	</target>
</project>
